"use strict";function registry(){$("#registry-form");var o=$("#userphone"),s=$("#incode"),r=$("#code"),c=$("#password"),i=$("#repeat"),t=$("#registry-form .wrophone"),l=$("#registry-form .wrocode"),n=$("#registry-form .wropass"),a=$("#registry-form .wrorepeat"),p=$(".agree .chose"),d=$("#registry-form"),e=!0,h=!0,u=!0,b=!0;code(r),o.on("focus",function(){$(this).css("border-color","#CC0000")}),o.on("blur",function(){""!==$(this).val()?/^1[3456789]\d{9}$/.test($(this).val())?$.ajax({type:"post",url:"http://10.31.155.61/program_zol/ZOL/php/registry.php",data:{userphone:o.val()}}).done(function(o){e=o?(t.css({"background-position-y":"-184px",display:"block"}).html("手机号已注册"),!1):(t.css({"background-position-y":"-148px",display:"block"}).html(""),!0)}):(t.css({"background-position-y":"-184px",display:"block"}).html("请填写有效的11位手机号码"),e=!1):(t.css({"background-position-y":"-184px",display:"block"}).html("手机号码不能为空"),e=!1),$(this).css("border-color","#CCC")}),r.on("click",function(){code($(this)),l.css({display:"none"}).html("")}),s.on("focus",function(){$(this).css("border-color","#c00000")}),s.on("blur",function(){u=""!==$(this).val()?r.html()===s.val()?(l.css({"background-position-y":"-148px",display:"block"}).html(""),!0):(l.css({"background-position-y":"-184px",display:"block"}).html("验证码错误，请重新输入"),!1):(l.css({"background-position-y":"-184px",display:"block"}).html("请填写验证码"),!1),$(this).css("border-color","#CCC")}),c.on("focus",function(){$(this).css("border-color","#c00000")}),c.on("blur",function(){h=""!==$(this).val()?6<=$(this).val().length&&$(this).val().length<=16?/^[0-9]+$/g.test($(this).val())?(n.css({"background-position-y":"-184px",display:"block",color:"#ff3333"}).html("密码不能全是数字"),!1):(n.css({"background-position-y":"-148px",display:"block",color:"#ff3333"}).html(""),!0):(n.css({"background-position-y":"-184px",display:"block",color:"#ff3333"}).html("6-16位字符，可使用字母、数字或符号的组合"),!1):(n.css({"background-position-y":"-184px",display:"block",color:"#ff3333"}).html("请填写密码"),!1),$(this).css("border-color","#CCC")}),i.on("focus",function(){$(this).css("border-color","#c00000")}),i.on("blur",function(){h=""!==$(this).val()?$(this).val()===c.val()?(a.css({"background-position-y":"-148px",display:"block"}).html(""),!0):(a.css({"background-position-y":"-184px",display:"block",color:"#ff3333"}).html("两次填写的密码不一致"),!1):(a.css({"background-position-y":"-184px",display:"block",color:"#ff3333"}).html("请填写确认密码"),!1),$(this).css("border-color","#CCC")}),p.on("click",function(){b=!!p.prop("checked")}),d.on("submit",function(){return""===o.val()&&(t.css({"background-position-y":"-184px",display:"block"}).html("手机号码不能为空"),e=!1),""===s.val()&&(l.css({"background-position-y":"-184px",display:"block"}).html("请填写验证码"),u=!1),""===c.val()&&(n.css({"background-position-y":"-184px",display:"block",color:"#ff3333"}).html("请填写密码"),h=!1),""===i.val()&&(a.css({"background-position-y":"-184px",display:"block",color:"#ff3333"}).html("请填写确认密码"),h=!1),b?!!(e&&h&&u&&b)&&void 0:(alert("请先阅读用户协议"),!1)})}function code(o){for(var s=[],r=48;r<=57;r++)s.push(String.fromCharCode(r));for(var c=97;c<=122;c++)s.push(String.fromCharCode(c));for(var i="",t=1;t<=6;t++){var l=parseInt(Math.random()*s.length);if(9<l)i+=.5<Math.random()?s[l].toUpperCase():s[l];else i+=s[l]}o.html(i)}require(["config"],function(){require(["jquery","jqcookie"],function(){registry()})});