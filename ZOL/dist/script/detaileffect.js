"use strict";function fdj(){var e=$(".picbox"),i=$(".picbox .small"),s=$(".picbox .sf"),n=$(".bf .big"),t=$(".bf"),o=i.width()*t.width()/n.width(),c=i.height()*t.height()/n.height(),a=n.width()/i.width();e.hover(function(){s.css({visibility:"visible",width:o,height:c}),t.css({visibility:"visible"}),$(document).on("mousemove",function(i){var t=i.pageX-e.offset().left-s.width()/2,o=i.pageY-e.offset().top-s.height()/2;t<=0?t=0:t>=e.width()-s.width()&&(t=e.width()-s.width()),o<=0?o=0:o>=e.height()-s.height()&&(o=e.height()-s.height()),s.css({left:t,top:o}),n.css({left:-t*a,top:-o*a})})},function(){s.css({visibility:"hidden"}),t.css({visibility:"hidden"})})}function show(){var o=$(".picbox .small"),e=$(".bf .big");$(".ulist .showBox").delegate("li","click",function(i){if(console.log(i.target.nodeName),"IMG"===i.target.nodeName){$(this).addClass("show").siblings("li").removeClass("show");var t=$(this).find("img").attr("src");o.attr("src",t),e.attr("src",t)}})}function car(){var t=location.search.substring(1).split("=")[1],o=$(".quantity .goods-num"),i=$(".deal-btn .add-car"),e=$(".amount .increase"),s=$(".amount .decrease"),n=$(".quantity .limit"),c=[],a=[];$.cookie("goodsid")&&$.cookie("goodsnum")&&(c=$.cookie("goodsid").split(","),a=$.cookie("goodsnum").split(",")),e.on("click",function(){var i=o.val();++i<n.html()?o.val(i):o.val(99)}),s.on("click",function(){var i=o.val();1<--i?o.val(i):o.val(1)}),i.on("click",function(){if(-1!==c.indexOf(t)){var i=c.indexOf(t);a[i]=parseInt(a[i])+parseInt(o.val()),a[i]<n.html()?$.cookie("goodsnum",a.toString(),{expires:30}):alert("超过限购数量")}else c.push(t),a.push(o.val()),$.cookie("goodsid",c.toString(),{expires:30}),$.cookie("goodsnum",a.toString(),{expires:30});alert("商品添加成功")})}require(["config"],function(){require(["jquery","jqcookie"],function(){fdj(),show(),car()})});